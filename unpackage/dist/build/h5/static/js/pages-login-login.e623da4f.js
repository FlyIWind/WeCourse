(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-login-login"],{"1d6e":function(t,e,n){"use strict";var i=n("56fd"),a=n.n(i);a.a},"56fd":function(t,e,n){var i=n("940b");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("7dbb63da",i,!0,{sourceMap:!1,shadowMode:!1})},"5c48":function(t,e,n){"use strict";n.r(e);var i=n("7407"),a=n("7122");for(var s in a)"default"!==s&&function(t){n.d(e,t,(function(){return a[t]}))}(s);n("1d6e");var o,r=n("f0c5"),u=Object(r["a"])(a["default"],i["b"],i["c"],!1,null,"51b496c0",null,!1,i["a"],o);e["default"]=u.exports},7122:function(t,e,n){"use strict";n.r(e);var i=n("f616"),a=n.n(i);for(var s in i)"default"!==s&&function(t){n.d(e,t,(function(){return i[t]}))}(s);e["default"]=a.a},7407:function(t,e,n){"use strict";var i,a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-image",{staticClass:"response",attrs:{src:"/static/componentBg.png",mode:"widthFix"}}),n("h1",{staticClass:"logintitle"},[t._v("登录")]),n("v-uni-view",{staticClass:"input-group"},[n("v-uni-view",{staticClass:"input-row border"},[n("v-uni-text",{staticClass:"title"},[t._v("账号：")]),n("v-uni-input",{staticClass:"m-input",attrs:{type:"text",clearable:!0,focus:!0,placeholder:"请输入账号"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}})],1),n("v-uni-view",{staticClass:"input-row"},[n("v-uni-text",{staticClass:"title"},[t._v("密码：")]),n("v-uni-input",{staticClass:"m-input",attrs:{type:"password",displayable:!0,placeholder:"请输入密码"},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1),n("v-uni-view",{staticClass:"text-center",staticStyle:{"margin-top":"20rpx"}},[n("v-uni-view",{staticClass:"cu-tag line-blue"},[t._v("注：账号密码与教务系统相同")])],1),n("v-uni-view",{staticClass:"text-center",staticStyle:{"margin-top":"20rpx"}},[n("v-uni-button",{staticClass:"cu-btn lines-blue  shadow",attrs:{loading:t.isLogin},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.login()}}},[t._v("登录")])],1)],1)},s=[];n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i}))},"940b":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,".logintitle[data-v-51b496c0]{background:-webkit-linear-gradient(right,#add8e6,#00f);background:linear-gradient(270deg,#add8e6,#00f);-webkit-background-clip:text;color:transparent;text-align:center}",""]),t.exports=e},f616:function(t,e,n){"use strict";var i=n("ee27");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=i(n("f43c")),s={data:function(){return{username:null,password:null,isLogin:!1}},mounted:function(){var t=this,e=[];uni.connectSocket({url:a.default.service}),uni.onSocketOpen((function(t){!0;for(var n=0;n<e.length;n++)sendSocketMessage(e[n]);e=[]})),uni.onSocketError((function(t){alert("服务器连接失败！")})),uni.onSocketClose((function(){uni.navigateTo({url:"../index/index"})})),uni.onSocketMessage((function(e){console.log(e.data),"登录成功"==e.data?(uni.setStorage({key:"username",data:t.username}),uni.setStorage({key:"password",data:t.password}),uni.closeSocket()):(alert("登录失败！"),t.isLogin=!1)}))},methods:{login:function(){if(!this.isLogin){var t=function(t){uni.sendSocketMessage({data:t})};if(null==this.username||null==this.password||""==this.username||""==this.password||0==this.username.length||0==this.password.length)return void alert("用户名或密码不能为空！");this.isLogin=!0;var e=this;t('{"Type":"login","UserName":"'+e.username+'","PassWord":"'+e.password+'","Week":1}')}}}};e.default=s}}]);